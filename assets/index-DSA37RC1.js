import{a as n,e as g,j as e}from"./index-CuanTbOI.js";import{a as j,c as h,g as v}from"./authApi-r9NGDoDp.js";import{c as d,a as y,d as b,e as k,f as N,g as p,h as S}from"./index-CuF14478.js";import{H as w,S as F}from"./Sidebar-BGjak_M3.js";import{u as P}from"./App-YdwU8Dbf.js";import{C as f}from"./Container-KJ8Zp7nm.js";import{R as D,C as E}from"./Row-Dt60Ebs6.js";import"./index-DkLdQXOw.js";const T=async()=>(await j.get("/student/getMyProfile")).data,C=()=>{const[a,l]=n.useState(null),[i,o]=n.useState(!0),[r,x]=n.useState(null),[m]=g(),u=m==="dark";return n.useEffect(()=>{(async()=>{try{const s=await T();l(s),o(!1)}catch(s){console.error("Error fetching profile data:",s),x("تعذر تحميل البيانات. حاول مرة أخرى."),o(!1)}})().then(s=>s)},[]),i?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"جاري تحميل البيانات..."})}):r?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-red-600 bg-red-100 p-4 rounded-lg",children:r})}):e.jsx("div",{dir:"rtl",className:`min-h-screen flex items-center justify-center ${u?"dark":""} bg-gray-100 dark:bg-gray-900 transition-all duration-300`,children:e.jsxs("div",{className:"p-8 rounded-lg shadow-lg bg-white dark:bg-gray-800 w-full max-w-md transition-all duration-300",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(d,{size:50,className:"mb-3 text-blue-600 dark:text-blue-400 mx-auto"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"الملف الشخصي"})]}),e.jsx("div",{className:"space-y-4",children:a&&e.jsxs(e.Fragment,{children:[e.jsx(t,{icon:e.jsx(d,{}),label:"الاسم الأول",value:a.firstName}),e.jsx(t,{icon:e.jsx(d,{}),label:"الاسم الأوسط",value:a.middleName}),e.jsx(t,{icon:e.jsx(d,{}),label:"اسم العائلة",value:a.lastName}),e.jsx(t,{icon:e.jsx(y,{}),label:"البريد الإلكتروني",value:a.email}),e.jsx(t,{icon:e.jsx(b,{}),label:"رقم الهاتف",value:a.mobileNumber}),e.jsx(t,{icon:e.jsx(k,{}),label:"الرقم القومي",value:a.nationalId}),e.jsx(t,{icon:e.jsx(N,{}),label:"الكلية",value:a.faculty}),e.jsx(t,{icon:e.jsx(p,{}),label:"الغرفة",value:a.room}),e.jsx(t,{icon:e.jsx(S,{}),label:"الطابق",value:a.floor.toString()})]})})]})})},t=({label:a,value:l,icon:i})=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-md shadow-sm",children:[e.jsx("div",{className:"text-blue-600 dark:text-blue-400",children:i}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-gray-700 dark:text-gray-300 font-semibold",children:[a,":"]}),e.jsx("div",{className:"text-gray-900 dark:text-white",children:l})]})]}),$=()=>{const[a]=g(),[l,i]=n.useState(!0),o=a==="dark",r=P(),[x,m]=n.useState(null);return n.useEffect(()=>{(async()=>{try{const c=localStorage.getItem("token");if(!c){r("/login");return}const s=await h();s.status==="Token is valid"&&s.firstName?m(s):r("/login"),await v(c)!=="STUDENT"&&r("/login")}catch(c){console.error("Token validation failed:",c),r("/login")}})().then(()=>i(!1))},[r]),l?e.jsx(f,{fluid:!0,className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh",background:o?"var(--dark-sea-green)":"var(--mint)"},children:e.jsx("div",{children:"Loading..."})}):x?e.jsxs(f,{fluid:!0,className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh",background:o?"var(--dark-sea-green)":"var(--mint)"},children:[e.jsx(w,{}),e.jsx(F,{}),e.jsx(D,{className:"w-100",children:e.jsx(E,{xs:12,md:6,lg:4,className:"mx-auto",children:e.jsx(C,{})})})]}):null};export{$ as default};
