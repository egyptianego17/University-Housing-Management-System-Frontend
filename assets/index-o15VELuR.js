import{a as r,e as u,j as e}from"./index-B1yer5HY.js";import{a as j}from"./studentApi-ClL_ysZ2.js";import{c,a as h,d as g,e as v,f as b,g as y,h as N}from"./index-COon2A4y.js";import{H as k,S as p,a as w}from"./authorization-Cx7eqv5C.js";import{u as S}from"./App-D61zO34k.js";import{C as m}from"./Container-DHSQaRVF.js";import{R as F,C as D}from"./Row-BdD2WVtU.js";import"./index-CJV59H5N.js";import"./authApi-OITqaPXZ.js";const E=()=>{const[a,i]=r.useState(null),[l,n]=r.useState(!0),[t,x]=r.useState(null),[d]=u(),f=d==="dark";return r.useEffect(()=>{(async()=>{try{const o=await j();i(o),n(!1)}catch(o){console.error("Error fetching profile data:",o),x("تعذر تحميل البيانات. حاول مرة أخرى."),n(!1)}})().then(o=>o)},[]),l?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"جاري تحميل البيانات..."})}):t?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-red-600 bg-red-100 p-4 rounded-lg",children:t})}):e.jsx("div",{dir:"rtl",className:`min-h-screen flex items-center justify-center ${f?"dark":""} bg-gray-100 dark:bg-gray-900 transition-all duration-300`,children:e.jsxs("div",{className:"p-8 rounded-lg shadow-lg bg-white dark:bg-gray-800 w-full max-w-md transition-all duration-300",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(c,{size:50,className:"mb-3 text-blue-600 dark:text-blue-400 mx-auto"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"الملف الشخصي"})]}),e.jsx("div",{className:"space-y-4",children:a&&e.jsxs(e.Fragment,{children:[e.jsx(s,{icon:e.jsx(c,{}),label:"الاسم الأول",value:a.firstName}),e.jsx(s,{icon:e.jsx(c,{}),label:"الاسم الأوسط",value:a.middleName}),e.jsx(s,{icon:e.jsx(c,{}),label:"اسم العائلة",value:a.lastName}),e.jsx(s,{icon:e.jsx(h,{}),label:"البريد الإلكتروني",value:a.email}),e.jsx(s,{icon:e.jsx(g,{}),label:"رقم الهاتف",value:a.mobileNumber}),e.jsx(s,{icon:e.jsx(v,{}),label:"الرقم القومي",value:a.nationalId}),e.jsx(s,{icon:e.jsx(b,{}),label:"الكلية",value:a.faculty}),e.jsx(s,{icon:e.jsx(y,{}),label:"الغرفة",value:a.room}),e.jsx(s,{icon:e.jsx(N,{}),label:"الطابق",value:a.floor.toString()})]})})]})})},s=({label:a,value:i,icon:l})=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-md shadow-sm",children:[e.jsx("div",{className:"text-blue-600 dark:text-blue-400",children:l}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-gray-700 dark:text-gray-300 font-semibold",children:[a,":"]}),e.jsx("div",{className:"text-gray-900 dark:text-white",children:i})]})]}),U=()=>{const[a]=u(),[i,l]=r.useState(!0),n=a==="dark",t=S();return r.useEffect(()=>{(async()=>{try{await w("STUDENT")||t("/login")}catch(d){console.error("Token validation failed:",d),t("/login")}})().then(()=>l(!1))},[t]),i?e.jsx(m,{fluid:!0,className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh",background:n?"var(--dark-sea-green)":"var(--mint)"},children:e.jsx("div",{children:"Loading..."})}):e.jsxs(m,{fluid:!0,className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh",background:n?"var(--dark-sea-green)":"var(--mint)"},children:[e.jsx(k,{}),e.jsx(p,{}),e.jsx(F,{className:"w-100",children:e.jsx(D,{xs:12,md:6,lg:4,className:"mx-auto",children:e.jsx(E,{})})})]})};export{U as default};
