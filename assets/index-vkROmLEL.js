import{e as m,a as h,j as e}from"./index-DutIGTee.js";import{u as p,c as b,a as c}from"./index.esm-zy8bqU4B.js";import{F as f,a as j,b as k}from"./index-CWQsBC13.js";import{l as y}from"./authApi-r9NGDoDp.js";import{u as w}from"./App-C6_A-sgn.js";import{C as N}from"./Container-Cw1mb16r.js";import{R as v,C}from"./Row-3ro051cA.js";import"./index-BOngQ4p3.js";const F=()=>{const[n]=m(),[l,a]=h.useState(null),u=n==="dark",i=w(),r=p({initialValues:{email:"",password:""},validationSchema:b({email:c().email("بريد إلكتروني غير صحيح.").required("ادخل البريد الإلكتروني"),password:c().min(8,"يجب أن تكون كلمة السر على الأقل 8 حروف.").required("ادخل كلمة السر")}),onSubmit:o=>{x(o.email,o.password)}}),x=async(o,g)=>{a(null);try{const s=await y({email:o,password:g});console.log("Login successful:",s);const t=s.token||"",d=s.role||"";localStorage.setItem("token",t),localStorage.setItem("role",d),d==="STUDENT"&&i("/student/myprofile")}catch(s){if(console.error("Login failed:",s),s.response&&s.response.data){const t=s.response.data.message;t.includes("Invalid credentials.")?a("البيانات غير صحيحة، يرجى مراجعة كلمة السر."):t.includes("User with email")?a("المستخدم الذي يحمل هذا البريد الإلكتروني غير موجود."):a(t)}else a("حدث خطأ غير متوقع.")}};return e.jsx("div",{dir:"rtl",className:`min-h-screen flex items-center justify-center px-4 ${u?"dark":""} bg-gray-100 dark:bg-gray-900 transition-all duration-300`,children:e.jsxs("div",{className:"p-8 rounded-lg shadow-lg bg-white dark:bg-gray-800 w-full max-w-md transition-all duration-300",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(f,{size:40,className:"mb-3 text-gray-500 dark:text-gray-200 mx-auto"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"تسجيل الدخول"})]}),l&&e.jsx("div",{className:"mb-4 p-2 text-red-600 bg-red-200 rounded",children:l}),e.jsxs("form",{onSubmit:r.handleSubmit,className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{htmlFor:"email",className:"text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[e.jsx(j,{}),"البريد الإلكتروني"]}),e.jsx("input",{id:"email",type:"email",name:"email",placeholder:"ادخل البريد الإلكتروني",value:r.values.email,onChange:r.handleChange,className:`p-2 rounded border ${r.touched.email&&r.errors.email?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600`}),r.touched.email&&r.errors.email?e.jsx("span",{className:"text-red-500 text-sm",children:r.errors.email}):null]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{htmlFor:"password",className:"text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[e.jsx(k,{}),"كلمة السر"]}),e.jsx("input",{id:"password",type:"password",name:"password",placeholder:"ادخل الرقم السري",value:r.values.password,onChange:r.handleChange,className:`p-2 rounded border ${r.touched.password&&r.errors.password?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600`}),r.touched.password&&r.errors.password?e.jsx("span",{className:"text-red-500 text-sm",children:r.errors.password}):null]}),e.jsx("button",{type:"submit",className:"w-full py-2 mt-4 text-white bg-blue-600 rounded hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 transition",children:"تسجيل الدخول"}),e.jsx("div",{className:"flex justify-between mt-4 text-blue-600 dark:text-blue-400",children:e.jsx("button",{type:"button",className:"hover:underline",onClick:()=>i("/student/register"),children:"تسجيل حساب جديد"})})]})]})})},T=()=>{const[n]=m(),l=n==="dark";return e.jsx(N,{fluid:!0,className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh",background:l?"var(--dark-sea-green)":"var(--mint)"},children:e.jsx(v,{className:"w-100",children:e.jsx(C,{xs:12,md:6,lg:4,className:"mx-auto",children:e.jsx(F,{})})})})};export{T as default};
